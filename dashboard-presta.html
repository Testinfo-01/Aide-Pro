<!DOCTYPE html><html><head><title>dashboard-presta.html</title></head><body>

<header style="background:#092544; color:white; display:flex; justify-content:space-between; align-items:center; padding:1rem 2rem;">
  <a href="index.html" style="color:white; text-decoration:none; font-size:1.5rem; font-weight:bold;">Aide Pro</a>
  <div style="display:flex; gap:1rem;">
    <button onclick="goToDashboard()" style="background:#1a6dff; border:none; color:white; padding:0.5rem 1rem; border-radius:5px;">Dashboard</button>
    <button onclick="location.href='profil.html'" style="background:#1a6dff; border:none; color:white; padding:0.5rem 1rem; border-radius:5px;">Profil</button>
    <button onclick="logout()" style="background:#1a6dff; border:none; color:white; padding:0.5rem 1rem; border-radius:5px;">DÃ©connexion</button>
  </div>
</header>
<main><h2>Contenu de dashboard-presta.html</h2></main>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";
  import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_AUTH_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_STORAGE_BUCKET",
    messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  window.logout = function () {
    signOut(auth).then(() => {
      window.location.href = "auth.html";
    });
  }

  window.goToDashboard = function () {
    onAuthStateChanged(auth, async (user) => {
      if (user) {
        const userRef = doc(db, "users", user.uid);
        const userSnap = await getDoc(userRef);
        const role = userSnap.exists() ? userSnap.data().role : "client";
        window.location.href = role === "prestataire" ? "dashboard-presta.html" : "dashboard-client.html";
      } else {
        window.location.href = "auth.html";
      }
    });
  }
</script>
</body></html>